stages:
  - test

python_testing:
  image: registry.gitlab.com/manticoresearch/openapi/python_testing
  stage: test
  only:
    changes:
      - out/manticore-python/*
  script:
    - cd out/manticore-python
    - pip3 install -U setuptools 
    - pip3 install -r requirements.txt
    - python3 setup.py install
    - bash /prep.sh
    - python3 test/test.py

javascript_testing:
  image: node
  stage: test
  only:
    changes:
      - out/manticore-javascript/*
  script:
    - cd out/manticore-javascript
    - npm install --dev
    - npm test